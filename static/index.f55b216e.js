var e=Object.defineProperty,n=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(n,t,o)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,i=(e,n)=>{for(var t in n||(n={}))r.call(n,t)&&a(e,t,n[t]);if(o)for(var t of o(n))s.call(n,t)&&a(e,t,n[t]);return e},c=(e,o)=>n(e,t(o)),l=(e,n)=>{var t={};for(var a in e)r.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&o)for(var a of o(e))n.indexOf(a)<0&&s.call(e,a)&&(t[a]=e[a]);return t};import{e as u,r as p,j as d,a as f,E as g,C as h,W as v,u as x,B as y,b as m,c as S,I as O,d as b,f as C,g as w,h as L,i as F,F as I,R as k,k as E,l as T}from"./vendor.2a7ce7d9.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)})).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const n=function(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?n.credentials="include":"anonymous"===e.crossorigin?n.credentials="omit":n.credentials="same-origin",n}(e);fetch(e.href,n)}}();const R=u({config:{initialColorMode:"dark",useSystemColorMode:!0}});const M={1:{pagination:{page:1,nextPage:2},members:["William","Juliano","Matheus","IgÃ£o","Italo"]},2:{pagination:{page:2,previousPage:1},members:["Zaza","Clebinho"]}};async function P(e){var n;const t=null!=(n=e.nextKey)?n:1,o=await function(e,n=1e3){return new Promise((t=>setTimeout((()=>t(e)),n)))}(M[t],2e3);return{data:o.members,state:{nextKey:o.pagination.nextPage,previousKey:o.pagination.previousPage,hasReachedTheEnd:!o.pagination.nextPage}}}const N={hasReachedTheEnd:!1};var U,j;(j=U||(U={})).UP="UP",j.DOWN="DOWN",j.LEFT="LEFT",j.RIGHT="RIGHT";const D={[U.UP]:38,[U.DOWN]:40,[U.LEFT]:37,[U.RIGHT]:39},H=[D.UP,D.UP,D.LEFT,D.RIGHT,D.DOWN,D.DOWN],W={w:"12px",h:"12px"},G={w:"16px",h:"16px"};function V({connectivityState:e}){return d(p.exports.Fragment,{children:[["IDLE","SUCCESSFUL"].includes(e)&&f(g,i({},G)),"LOADING"===e&&f(h,{isIndeterminate:!0,size:G.w,trackColor:"transparent",color:"blue.300"}),"FAILURE"===e&&f(v,c(i({},G),{color:"red.300"}))]})}const A=p.exports.forwardRef((function(e,n){var t=e,{isOpen:o=!1,selected:r,options:s=[],onSelectOption:a=(()=>{})}=t,u=l(t,["isOpen","selected","options","onSelectOption"]);const g=p.exports.useMemo((()=>({maxHeight:s.length>=4?"160px":void 0})),[s]),h=p.exports.useMemo((()=>o&&s.length>0),[o,s]);return f(p.exports.Fragment,{children:h&&f(y,c(i(i({ref:n,position:"absolute",top:"100%",my:"6px",width:"100%",boxSizing:"border-box",borderRadius:"6px",boxShadow:"0 0 0 1px hsl(0deg 0% 0% / 10%), 0 4px 11px hsl(0deg 0% 0% / 10%)",background:"gray.700",as:"ul",listStyleType:"none",zIndex:"3",overflow:"scroll"},g),u),{children:s.map((e=>d(m,{variant:"ghost",width:"100%",justifyContent:"space-between",onClick:()=>a(e),children:[e.value,r===e&&f(S,i({},W))]},e.key)))}))})}));const z=p.exports.forwardRef((function(e,n){var t=e,{LeftComponent:o,RightComponent:r,options:s,value:a,selected:u,isMenuOpen:g,onInputFocus:h,onChangeValue:v,onSelectOption:m,onScroll:S}=t,I=l(t,["LeftComponent","RightComponent","options","value","selected","isMenuOpen","onInputFocus","onChangeValue","onSelectOption","onScroll"]);const k=p.exports.useRef(),E=function({ref:e,value:n,isMenuOpen:t,selected:o,onInputFocus:r,onChangeValue:s,onSelectOption:a}){const[i,c]=p.exports.useState(""),[l,u]=p.exports.useState(),[d,f]=p.exports.useState(!1),g=p.exports.useCallback((e=>{r&&r(e),!d&&f(!0)}),[d,r]),h=p.exports.useCallback((e=>{s?s(e):c(e),!d&&f(!0)}),[d,s]),v=p.exports.useCallback((e=>{a?a(e):u(e),s?s(e.value):c(e.value),d&&f(!1)}),[d,a,s]),y=p.exports.useCallback((()=>{c(""),u(void 0),d&&f(!1)}),[f]);return x({ref:e,handler:()=>f(!1),enabled:d}),{value:null!=n?n:i,isMenuOpen:null!=t?t:d,selected:null!=o?o:l,onInputFocus:g,onChangeValue:h,onSelectOption:v,onResetState:y}}({ref:k,value:a,selected:u,isMenuOpen:g,onInputFocus:h,onChangeValue:v,onSelectOption:m});return d(y,c(i({position:"relative"},I),{children:[d(O,{children:[f(b,{children:o&&f(o,i({},E))}),f(C,{ref:n,value:E.value,onChange:e=>E.onChangeValue(e.target.value),onFocus:E.onInputFocus}),f(w,{children:r?f(r,i({},E)):E.value?f(F,c(i({},W),{cursor:"pointer",onClick:E.onResetState})):f(L,i({},W))})]}),f(A,{ref:k,selected:E.selected,options:s,isOpen:E.isMenuOpen,onSelectOption:E.onSelectOption,onScroll:S})]}))}));const K=p.exports.forwardRef((function(e,n){var t=e,{service:o,paginated:r=!0,onMapToOptions:s,onLoading:a,onSuccess:c,onFailure:u}=t,d=l(t,["service","paginated","onMapToOptions","onLoading","onSuccess","onFailure"]);const{state:g,service:h}=function(e){const n=p.exports.useRef(N),t=p.exports.useCallback((async()=>{const{state:t,data:o}=await e(n.current);return n.current=t,o}),[e,n]);return{state:n.current,service:t}}(o),{connectivityState:v,options:x,execute:y}=function(e,{mappers:{onMapToOptions:n},lifecycle:t,behaviors:o}){const[r,s]=p.exports.useState("IDLE"),[a,i]=p.exports.useState([]),c=p.exports.useCallback((async()=>{s("LOADING"),(null==t?void 0:t.onLoading)&&(null==t||t.onLoading());try{const r=await e(),a=n(r);i((e=>[...(null==o?void 0:o.paginated)?e:[],...a])),s("SUCCESSFUL"),(null==t?void 0:t.onSuccess)&&(null==t||t.onSuccess(r))}catch(r){s("FAILURE"),(null==t?void 0:t.onFailure)&&(null==t||t.onFailure(r))}}),[e,n,t,o]);return p.exports.useEffect((()=>{c()}),[]),{connectivityState:r,options:a,execute:c}}(h,{mappers:{onMapToOptions:s},lifecycle:{onLoading:a,onSuccess:c,onFailure:u},behaviors:{paginated:r}}),m=function(e){const n=p.exports.useRef(!1),t=p.exports.useCallback((e=>e.currentTarget.scrollHeight-Math.abs(e.currentTarget.scrollTop)===e.currentTarget.clientHeight),[]),o=p.exports.useCallback((async()=>{try{return n.current=!0,await e()}catch(t){return{}}finally{n.current=!1}}),[n,e]);return p.exports.useCallback((async e=>!n.current&&t(e)?await o():{}),[n,t,o])}((async()=>!g.hasReachedTheEnd&&await y()));return function(e,{sequence:n}){const[t,o]=p.exports.useState([]),r=p.exports.useMemo((()=>n.length===t.length),[n,t]),s=p.exports.useMemo((()=>t.reduce(((e,t,o)=>e&&n[o]===t),!0)),[t,n]),a=p.exports.useCallback((e=>n.includes(e.keyCode)&&o((n=>[...n,e.keyCode]))),[n]);p.exports.useEffect((()=>(window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a))),[a]),p.exports.useEffect((()=>{r&&(s&&e(),o([]))}),[r,s,e])}((async()=>!g.hasReachedTheEnd&&await y()),{sequence:H}),f(z,i({ref:n,LeftComponent:()=>f(V,{connectivityState:v}),options:x,onScroll:m},d))}));function q(){return f(I,{width:"100vw",height:"100vh",alignItems:"center",justifyContent:"center",children:f(K,{service:P,onMapToOptions:e=>function(e){return e.map((e=>({key:e,value:e})))}(e),onLoading:()=>console.log("onLoading"),onSuccess:e=>console.log(`onSuccess: ${JSON.stringify(e)}`),onFailure:e=>console.log(`onFailure: ${e}`)})})}k.render(f(E.StrictMode,{children:f(T,{theme:R,children:f(q,{})})}),document.getElementById("root"));
//# sourceMappingURL=index.f55b216e.js.map
